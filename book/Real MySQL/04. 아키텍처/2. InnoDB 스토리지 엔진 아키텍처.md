# 4.2 InnoDB 스토리지 엔진 아키텍처

## 4.2.1. 프라이머리 키에 의한 클러스터링

InnoDB는 클러스터 인덱스를 사용한다. 데이터 레코드가 프라이머리 키 값의 순서대로 디스크에 저장된다는 의미이며, 프라이머리 키를 찾으면 데이터를 찾은것이다. 보조 인덱스는 레코드의 주소 대신 프라이머리 키의 값을 논리적인 주소로 사용한다. 즉 보조 인덱스의 각 항목은 `(찾고 싶은 보조 인덱스 값 &rarr; PK 값)` 구조로 되어있다.  
보조 인덱스만 보면 실제 데이터는 나오지 않고 프라이머리 키 값만 나오기 때문에 PK 인덱스를 타고 데이터를 찾아야 한다. 이 과정을 Secondary Index Lookup + Primary Index Lookup 이라고 부른다.

프라이머리 키가 클러스터링 인덱스이기 때문에 프라이머리 키를 이용한 레인지 스캔은 빠르게 처리된다.

결과적으로 쿼리플랜에서 프라이머리 키는 보조 인덱스에 비해 우선순위가 높다 &rarr; 쿼리 플랜에서 보조 인덱스보다 프라이머리 키가 선택될 확률이 높다

반대로 MyISAM 스토리지 엔진은 클러스터링 키를 지원하지 않는다. 즉 프라이머리 키와 보조 인덱스는 구조적으로 아무런 차이가 없다. PK는 유니크 제약조건을 갖는 보조인덱스 개념이다. 따라서 프라이머리 키를 포함한 모든 인덱스는 물리적인 레코드 주소값(ROWID)를 갖는다.

