# 타입스크립트

- 자바스크립트를 더 안전하게 사용할 수 있다록 **타입 관련 기능들을 추가**한 언어
- 자바스크립트의 기본 문법을 모두 포함

## Gradual Type System (점진적 타입 시스템)

### 개념

- **정적 타입과 동적 타입을 함께 사용할 수 있는 시스템**
- 타입을 명시적으로 지정할 수도 있고, 일부 구간은 타입을 느슨하게 처리할 수도 있음
- 정적으로 타입을 지정하면 **컴파일 타임에 타입 체크**, 동적으로 지정하면 **런타임에 타입 체크**
- **대표 언어**: TypeScript, Python (with type hints) 등

```ts
function greet(name: any) {
  console.log("Hello, " + name); // name의 타입이 any → 어떤 타입도 허용
}

function greetStrict(name: string) {
  console.log("Hello, " + name); // name은 string만 가능
}
```

### 장점

코드 베이스가 커질수록 정적 타입의 장점이 커지는데 Gradual Type System 덕분에 기존 코드의 유연함을 유지하면서도 점진적으로 타입 안정성을 높일 수 있다.  
타입 없는 기존 코드에 **타입을 천천히 도입할 수 있어서 마이그레이션이 쉬움**

### 점진적 타입 시스템 vs kotlin 타입 추론

타입 추론은 타입을 생략할 수 있지만, 컴파일러가 모든 타입을 추론함 &rarr; 런타임 타입 검사 없음, 모든 타입 검사는 컴파일 타임에 완료됨

| 항목              | Gradual Type System                      | Kotlin 타입 추론                             |
|-------------------|-------------------------------------------|----------------------------------------------|
| 타입 시스템       | 정적 + 동적 혼합                         | 완전한 정적 타입 시스템                      |
| 타입 생략 시       | 동적으로 처리될 수 있음 (`any`)          | 정적으로 타입 추론됨                         |
| 타입 검사 시점     | 정적 + 런타임                            | 컴파일 타임                                  |
| 런타임 타입 검사   | 가능 (동적 타입 구간)                    | 불가능 (전부 컴파일 타임에 타입 결정)       |
| 목적              | 유연성 + 점진적 타입 안정성 확보         | 개발 생산성 + 엄격한 타입 안정성             |
| 대표 언어         | TypeScript, Python (type hints) 등       | Kotlin, Swift, Scala 등                      |

## 타입스크립트 동작 원리

TypeScript는 자바스크립트의 상위 집합(Superset)으로, **정적 타입 시스템**과 **최신 JS 문법 지원**을 통해 개발자 경험과 코드 안전성을 높이는 언어이다. TypeScript는 브라우저가 직접 실행할 수 없기 때문에, 컴파일러(`tsc`)를 통해 **JavaScript로 트랜스파일**되어야 한다.

### 1. 파싱 (Parsing)

- `.ts` 파일을 읽어 **토큰화(Tokenizing)** 후 **AST(Abstract Syntax Tree)** 로 변환
- AST는 타입 정보까지 포함하는 TypeScript 전용 구조로, 타입 정보가 포함되어 있음
- 이 단계는 오류가 없다면 빠르게 통과됨

### 2. 타입 검사 (Type Checking)

- TypeScript는 이 AST를 기반으로 정적 타입 검사를 수행
- 모든 변수, 함수, 객체 등의 타입을 **정적으로 추론 및 검사**
- 컴파일 타임에서 오류 발견 가능하여, 런타임 오류를 사전에 차단할 수 있음
- 타입은 오직 개발 시점의 안정성 확보를 위한 것이며, 런타임에는 제거됨
- strict 모드를 통해 더 엄격한 검사 수행 가능
  - 예: noImplicitAny, strictNullChecks 등

### 3. 트랜스파일 (Transpile)

- AST를 바탕으로 JavaScript 코드 생성
- 이 과정에서 모든 타입 정보는 제거됨
- 설정(tsconfig.json)에 따라 JS 버전(예: ES5, ES6) 및 모듈 시스템(CommonJS, ESM 등)도 변환됨

```ts
// TypeScript
const greet = (name: string): string => `Hello, ${name}`;
```

```js
var greet = function (name) {
  return "Hello, " + name;
};
```

### 4. JavaScript 실행(컴파일)

JS 코드 → JS AST로 재파싱

- .js 파일이 실행되면 JS 엔진은 이를 다시 파싱하여 JavaScript AST 생성
- 이 AST는 순수한 JS 구조 (타입 정보는 없음)

바이트코드 생성 (Ignition, V8 기준)

- AST → 바이트코드(Bytecode)로 변환 (V8의 Ignition 엔진)
- 바로 실행 가능한 형태로 만들기 위한 중간 단계

JIT 컴파일 (TurboFan)

- 자주 사용되는 코드(Hot Code)는 **기계어(Machine Code)** 로 변환되어 성능 최적화

